<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="320px" preserveAspectRatio="none" style="width:526px;height:320px;background:#FFFFFF;" version="1.1" viewBox="0 0 526 320" width="526px" zoomAndPan="magnify"><defs/><g><g id="elem_ReadCache"><rect fill="#F1F1F1" height="43.2188" style="stroke:#181818;stroke-width:0.5;" width="198" x="31" y="7"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="92.5" y="23.5332">ReadCache</text><line style="stroke:#181818;stroke-width:1.0;" x1="31" x2="229" y1="28.6094" y2="28.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="46" x="36" y="45.1426">pubkey</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="132" x="92" y="45.1426">slot =&gt; account_data</text><line style="stroke:#181818;stroke-width:1.0;" x1="87" x2="87" y1="28.6094" y2="50.2188"/></g><g id="elem_AccountIndex"><rect fill="#F1F1F1" height="43.2188" style="stroke:#181818;stroke-width:0.5;" width="246" x="7" y="117"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="88" y="133.5332">AccountIndex</text><line style="stroke:#181818;stroke-width:1.0;" x1="7" x2="253" y1="138.6094" y2="138.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="46" x="12" y="155.1426">pubkey</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="180" x="68" y="155.1426">[(slot, offset_in_appendvec)]</text><line style="stroke:#181818;stroke-width:1.0;" x1="63" x2="63" y1="138.6094" y2="160.2188"/></g><g id="elem_WriteCache"><rect fill="#F1F1F1" height="43.2188" style="stroke:#181818;stroke-width:0.5;" width="118" x="304" y="117"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="74" x="326" y="133.5332">WriteCache</text><line style="stroke:#181818;stroke-width:1.0;" x1="304" x2="422" y1="138.6094" y2="138.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="24" x="309" y="155.1426">Slot</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="74" x="343" y="155.1426">CacheEntry</text><line style="stroke:#181818;stroke-width:1.0;" x1="338" x2="338" y1="138.6094" y2="160.2188"/></g><g id="elem_AccountBackGroundService"><rect fill="#F1F1F1" height="37.6094" style="stroke:#181818;stroke-width:0.5;" width="191" x="329.5" y="9"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="177" x="336.5" y="25.5332">AccountBackGroundService</text><line style="stroke:#181818;stroke-width:0.5;" x1="330.5" x2="519.5" y1="30.6094" y2="30.6094"/></g><g id="elem_AppendVecs"><rect fill="#F1F1F1" height="86.4375" style="stroke:#181818;stroke-width:0.5;" width="98" x="314" y="227"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80" x="323" y="243.5332">AppendVecs</text><line style="stroke:#181818;stroke-width:1.0;" x1="314" x2="412" y1="248.6094" y2="248.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="8" x="321" y="265.1426">1</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="341" y="265.1426">mmap_1.1</text><line style="stroke:#181818;stroke-width:1.0;" x1="336" x2="336" y1="248.6094" y2="270.2188"/><line style="stroke:#181818;stroke-width:1.0;" x1="314" x2="412" y1="270.2188" y2="270.2188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="8" x="321" y="286.752">2</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="341" y="286.752">mmap_2.2</text><line style="stroke:#181818;stroke-width:1.0;" x1="336" x2="336" y1="270.2188" y2="291.8281"/><line style="stroke:#181818;stroke-width:1.0;" x1="314" x2="412" y1="291.8281" y2="291.8281"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="12" x="319" y="308.3613">...</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="12" x="341" y="308.3613">...</text><line style="stroke:#181818;stroke-width:1.0;" x1="336" x2="336" y1="291.8281" y2="313.4375"/></g><!--MD5=[152390bc078c52d4cd2836fc3e57a9cc]
link AccountIndex to AppendVecs--><g id="link_AccountIndex_AppendVecs"><path codeLine="23" d="M173.55,163.11 C209.37,182.94 260.59,211.3 300.74,233.53 " fill="none" id="AccountIndex-to-AppendVecs" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="305.58,236.21,299.6443,228.3508,301.2059,233.7878,295.7688,235.3494,305.58,236.21" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[ef939ba16eccb40a48cfeb362f58f7e1]
link ReadCache to AccountIndex--><g id="link_ReadCache_AccountIndex"><path codeLine="24" d="M130,53.24 C130,69.36 130,90.62 130,107.69 " fill="none" id="ReadCache-to-AccountIndex" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="130,112.84,134,103.84,130,107.84,126,103.84,130,112.84" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[5de1f7123189570a779439273cb9d438]
link WriteCache to AppendVecs--><g id="link_WriteCache_AppendVecs"><path codeLine="25" d="M363,163.26 C363,178.61 363,199.01 363,217.73 " fill="none" id="WriteCache-to-AppendVecs" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="363,222.96,367,213.96,363,217.96,359,213.96,363,222.96" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[5bb9293c6c2008d8767e0303063b5646]
link AccountBackGroundService to WriteCache--><g id="link_AccountBackGroundService_WriteCache"><path codeLine="26" d="M414.48,47.32 C404.93,63.96 390.67,88.79 379.59,108.11 " fill="none" id="AccountBackGroundService-to-WriteCache" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="376.84,112.89,384.7823,107.066,379.3238,108.5505,377.8392,103.092,376.84,112.89" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[68bc45bfc932eb791b704b91838308fe]
link AccountBackGroundService to AppendVecs--><g id="link_AccountBackGroundService_AppendVecs"><path codeLine="27" d="M433.56,47.27 C444.65,73.53 460.97,123.18 447,163 C439.91,183.21 427.12,202.41 413.62,218.74 " fill="none" id="AccountBackGroundService-to-AppendVecs" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="410.18,222.83,419.0304,218.5091,413.395,219.0006,412.9034,213.3652,410.18,222.83" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[8bcb50eddac78e47c6c1252c53f9f358]
@startuml


map ReadCache {
    pubkey => slot => account_data
}

map AccountIndex {
    pubkey => [(slot, offset_in_appendvec)]
}

map WriteCache {
    Slot => CacheEntry
}

object AccountBackGroundService

map AppendVecs {
    1 => mmap_1.1
    2 => mmap_2.2
    ... => ...
}

AccountIndex - -> AppendVecs
ReadCache - -> AccountIndex
WriteCache - -> AppendVecs
AccountBackGroundService - -> WriteCache
AccountBackGroundService - -> AppendVecs

@enduml

PlantUML version 1.2022.7(Mon Aug 22 12:01:30 CDT 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>